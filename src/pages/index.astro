---
import { getCollection } from "astro:content";
import Pagination from "../components/Pagination.astro";
import ArticleList from "../components/ArticleList.astro";
import { POSTS_PER_PAGE } from "../config/config.mts";
import HomeLayout from "../layouts/HomeLayout.astro";

const currentPage = 1;
const allPosts = await getCollection("blog");
const sortedPosts = allPosts.sort((a, b) => new Date(b.data.date as any).getTime() - new Date(a.data.date as any).getTime());
const posts = sortedPosts.slice(0, POSTS_PER_PAGE);
const totalPages = Math.ceil(allPosts.length / POSTS_PER_PAGE);
const baseLink = "/";

---

<HomeLayout title="‰∏™‰∫∫ÂçöÂÆ¢ | My Blog" heroTitle="‚òò‰Ω†Â•ΩÂëÄ~‚òò" heroSubtitle="üçÄÊ¨¢ËøéÊù•Âà∞ LYGreen ÁöÑÂçöÂÆ¢ÔºÅüçÄ">
	<ArticleList posts={posts} />
	<Pagination currentPage={currentPage} totalPages={totalPages} baseLink={baseLink} />
</HomeLayout>

<style>

	/* ===== ‰∏ªÂÆπÂô®Â∏ÉÂ±Ä (Grid) ===== */
	.container {
		max-width: 1100px;
		margin: 0 auto;
		padding: 20px;
		display: grid;
		grid-template-columns: 3fr 1fr;
		gap: 30px;
	}

	aside {
		align-self: self-start;
		top: 80px;
	}

	/* ===== ÂìçÂ∫îÂºè ===== */
	@media (max-width: 768px) {
		.container {
			grid-template-columns: 1fr;
		}
		:global(aside) {
			display: none;
		}
	}
</style>
