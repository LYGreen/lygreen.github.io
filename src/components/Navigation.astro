---
import MobileSidebarGithubProfile from "./MobileSidebarGithubProfile.vue";

const BaseUrl = import.meta.env.BASE_URL || "/";
---

<nav>
    <div class="nav-container">
        <div class="mobile-menu-btn" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </div>

        <div class="logo"><a href={BaseUrl}>ğŸŒ¸ LYGreen's Blog</a></div>
        <div class="nav-links">
            <a href="/"><i class="fas fa-home"></i> é¦–é¡µ</a>
            <!-- <a href="#"><i class="fas fa-image"></i> ç›¸å†Œ</a> -->
            <a href="#"><i class="fas fa-comment"></i> ç•™è¨€</a>
        </div>
    </div>
</nav>

<div class="mobile-sidebar-overlay" onclick="toggleMobileMenu()"></div>
<div class="mobile-sidebar">
    <div class="mobile-sidebar-header">
        <h3>ğŸŒ¸ å¯¼èˆªèœå•</h3>
        <div class="close-btn" onclick="toggleMobileMenu()">
            <i class="fas fa-times"></i>
        </div>
    </div>
    <MobileSidebarGithubProfile client:load link="https://api.github.com/users/lygreen" />
    <div class="mobile-nav-links">
        <a href="/"><i class="fas fa-home"></i> é¦–é¡µ</a>
        <a href="#"><i class="fas fa-comment"></i> ç•™è¨€</a>
    </div>
</div>

<style>
    /* ===== ç§»åŠ¨ç«¯èœå•æŒ‰é’® (é»˜è®¤éšè—) ===== */
    .mobile-menu-btn {
        display: none;
        font-size: 1.5em;
        color: var(--dark-pink);
        cursor: pointer;
        z-index: 101;
    }

    /* ===== ç§»åŠ¨ç«¯ä¾§è¾¹æ ç»“æ„ ===== */
    .mobile-sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.3);
        z-index: 999;
        opacity: 0;
        visibility: hidden;
        transition: 0.3s;
        backdrop-filter: blur(2px);
    }
    .mobile-sidebar-overlay.active {
        opacity: 1;
        visibility: visible;
    }

    .mobile-sidebar {
        position: fixed;
        top: 0;
        left: -280px; /* åˆå§‹éšè—åœ¨å·¦ä¾§ */
        width: 260px;
        height: 100%;
        background: rgba(255, 255, 255, 0.95);
        z-index: 1000;
        box-shadow: -5px 0 15px rgba(0,0,0,0.1);
        transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        flex-direction: column;
        padding: 20px;
        box-sizing: border-box;
    }
    .mobile-sidebar.active {
        left: 0;
    }

    /* ä¾§è¾¹æ å¤´éƒ¨ */
    .mobile-sidebar-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        /* margin-bottom: 30px; */
        margin-bottom: 10px;
        border-bottom: 2px dashed var(--primary-pink);
        padding-bottom: 15px;
    }
    .mobile-sidebar-header h3 {
        margin: 0;
        color: var(--dark-pink);
    }
    .close-btn {
        font-size: 1.5em;
        color: #888;
        cursor: pointer;
    }
    
    /* ä¾§è¾¹æ é“¾æ¥ */
    .mobile-nav-links {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    .mobile-nav-links a {
        font-size: 1.1em;
        padding: 12px;
        border-radius: 10px;
        background: #FFF5F7;
        color: var(--text-color);
        display: flex;
        align-items: center;
        gap: 10px;
        transition: 0.2s;
    }
    .mobile-nav-links a:hover {
        background: var(--primary-pink);
        color: white;
        transform: translateX(5px);
    }

    /* ===== å¯¼èˆªæ  ===== */
    nav {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        padding: 15px 0;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        border-bottom: 2px solid var(--primary-pink);
    }
    .nav-container {
        max-width: 1100px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px;
    }
    .logo {
        font-size: 1.5em;
        font-weight: bold;
        color: var(--dark-pink);
    }
    .nav-links {
        display: flex;
        gap: 20px;
    }
    .nav-links a {
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 15px;
    }
    .nav-links a:hover {
        background: var(--primary-pink);
        color: white;
    }

    /* ===== å“åº”å¼ ===== */
    @media (max-width: 768px) {
        .container { grid-template-columns: 1fr; }
        
        /* éšè—æ¡Œé¢å¯¼èˆªï¼Œæ˜¾ç¤ºæ±‰å ¡æŒ‰é’® */
        .nav-links { display: none; } 
        .mobile-menu-btn { display: block; }

    }
</style>

<script is:inline>
    /* ===== ç§»åŠ¨ç«¯èœå•æ§åˆ¶é€»è¾‘ ===== */
    function toggleMobileMenu() {
        const sidebar = document.querySelector('.mobile-sidebar');
        const overlay = document.querySelector('.mobile-sidebar-overlay');
        
        // åˆ‡æ¢ active ç±»
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
    }
</script>
